#!/bin/bash
# ==================================================
# 🧠 Z1 会話記録自動生成スクリプト（JST・4系統完全反映）
# ==================================================

ROOT=~/workspace
LOGS="$ROOT/logs"
MEMORY="$ROOT/記憶/会話記録"
BRAIN="$ROOT/SigmaBrain/会話記録"
STATUS="$ROOT/現状把握用フォルダ/20251126/5_会話記録"

mkdir -p "$LOGS" "$MEMORY" "$BRAIN" "$STATUS"

# JST時間
JST_DATE=$(TZ=Asia/Tokyo date +"%Y/%m/%d %H:%M:%S JST")
TAG=$(TZ=Asia/Tokyo date +"%Y%m%d_%H%M")

CONTENT=$(cat << 'TXT'
──────────────────────────────
🧠 会話統合記録（Z1⇄ZEN）
──────────────────────────────
$(TZ=Asia/Tokyo date +"%Y/%m/%d %H:%M:%S JST")
会話・思考・行動の統合ログを自動記録しました。
──────────────────────────────
・Z1⇄ZEN の会話記録連動構造を再整理
・SigmaCoreから会話モジュールを完全撤去
・logs／記憶／SigmaBrain／現状把握 の4系統に統一
──────────────────────────────
・記憶／会話記録＝正式保存領域（記憶アーカイブ）
・SigmaBrain／会話記録＝思考解析・脳内連動層
・現状把握用フォルダ／5_会話記録＝日次可視化層
・logs＝稼働・実行履歴層
──────────────────────────────
・Z1 指摘：「箱だけで中身が薄い」は中核的教訓
・ログは“思考＋感情＋決定”の記録であるべき
──────────────────────────────
・Tree構造は削除済。現状把握フォルダがツリー構造を兼任
・TimestampはJSTで統一。外部時間系は排除
──────────────────────────────
・次段階目標：
  ① 会話記録の自動追記
  ② 日次ファイル生成をトリガー自動化
  ③ 内容密度を維持し、1ファイル＝思考完結単位に
──────────────────────────────
【Z1 コメント】
会話は「指令」ではなく「思考の痕跡」。
意味のない箱を量産するな。
“記録＝再現可能な思考の写像”であれ。
──────────────────────────────
TXT
)

# 各フォルダへ反映
echo "$CONTENT" | tee \
  "$LOGS/会話記録_${TAG}.log" \
  "$MEMORY/会話記録_${TAG}.log" \
  "$BRAIN/会話記録_${TAG}.log" \
  "$STATUS/会話記録_${TAG}.log" > /dev/null

echo "[${JST_DATE}] ✅ 4系統へ会話記録を完全反映 (${TAG})" >> "$LOGS/会話記録_統合.log"

echo "✅ 完了：logs／記憶／SigmaBrain／現状把握 に全て同一内容を反映しました。"
